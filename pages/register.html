<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up - ELITESTOCKOPTIONS</title>
  <link rel="icon" type="image/png" href="../public/logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../public/js/supabase-config.js"></script>
  <script src="../public/js/supabase-client.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4f46e5',
            secondary: '#7c3aed',
            accent: '#06b6d4'
          }
        }
      }
    }
  </script>
  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 50%, #06b6d4 100%);
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .input-field {
      transition: all 0.3s ease;
    }
    .input-field:focus {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.3);
    }
    .btn-primary {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px -5px rgba(79, 70, 229, 0.5);
    }
    .floating-shape {
      animation: float 6s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    .pulse-glow {
      animation: pulseGlow 2s ease-in-out infinite;
    }
    @keyframes pulseGlow {
      0%, 100% { box-shadow: 0 0 20px rgba(79, 70, 229, 0.3); }
      50% { box-shadow: 0 0 40px rgba(79, 70, 229, 0.6); }
    }
  </style>
</head>
<body class="min-h-screen bg-gray-50 flex">
  <!-- Left Side - Image & Branding -->
  <div class="hidden lg:flex lg:w-1/2 gradient-bg items-center justify-center relative overflow-hidden">
    <!-- Animated Background Shapes -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="floating-shape absolute top-10 left-10 w-32 h-32 bg-white/10 rounded-full blur-xl"></div>
      <div class="floating-shape absolute bottom-20 right-20 w-48 h-48 bg-white/10 rounded-full blur-xl" style="animation-delay: -2s;"></div>
      <div class="floating-shape absolute top-1/2 left-1/4 w-24 h-24 bg-cyan-400/20 rounded-full blur-lg" style="animation-delay: -4s;"></div>
      <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMiIvPjwvZz48L2c+PC9zdmc+')] opacity-30"></div>
    </div>
    
    <!-- Content -->
    <div class="relative z-10 text-center text-white px-12">
      <div class="mb-8">
        <img src="../public/logo.png" alt="ELITESTOCKOPTIONS" class="w-24 h-24 mx-auto mb-6 object-contain">
        <h1 class="text-4xl font-bold mb-4">ELITESTOCKOPTIONS</h1>
        <p class="text-xl text-white/80">Professional Trading Platform</p>
      </div>
      <div class="space-y-4 text-left max-w-md mx-auto">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <i class="fas fa-chart-line text-cyan-300"></i>
          </div>
          <span>Advanced Trading Tools</span>
        </div>
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <i class="fas fa-shield-alt text-cyan-300"></i>
          </div>
          <span>Bank-Grade Security</span>
        </div>
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <i class="fas fa-headset text-cyan-300"></i>
          </div>
          <span>24/7 Expert Support</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Side - Form -->
  <div class="w-full lg:w-1/2 flex items-center justify-center p-4 md:p-8 overflow-y-auto">
    <div class="w-full max-w-md">
      <!-- Logo for mobile -->
      <div class="lg:hidden text-center mb-6">
        <img src="../public/logo.png" alt="ELITESTOCKOPTIONS" class="w-16 h-16 mx-auto mb-3 object-contain">
        <h1 class="text-2xl font-bold text-gray-900">ELITESTOCKOPTIONS</h1>
      </div>

      <div class="glass-card rounded-2xl shadow-xl p-6 md:p-8">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-gray-900">Create Your Account</h2>
          <p class="text-gray-500 mt-2">Start your trading journey today</p>
        </div>

        <form id="register-form" class="space-y-4">
          <!-- Full Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
            <div class="relative">
              <i class="fas fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              <input type="text" id="fullName" required 
                class="input-field w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"
                placeholder="John Doe">
            </div>
          </div>

          <!-- Email -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
            <div class="relative">
              <i class="fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              <input type="email" id="email" required 
                class="input-field w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"
                placeholder="you@example.com">
            </div>
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
            <div class="flex">
              <select id="countryCode" class="input-field w-28 pl-3 pr-2 py-3 border border-gray-200 rounded-l-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 bg-white text-sm">
                <option value="+1" selected>+1 ðŸ‡ºðŸ‡¸</option>
                <option value="+44">+44 ðŸ‡¬ðŸ‡§</option>
                <option value="+1">+1 ðŸ‡¨ðŸ‡¦</option>
                <option value="+61">+61 ðŸ‡¦ðŸ‡º</option>
                <option value="+49">+49 ðŸ‡©ðŸ‡ª</option>
                <option value="+33">+33 ðŸ‡«ðŸ‡·</option>
                <option value="+81">+81 ðŸ‡¯ðŸ‡µ</option>
                <option value="+65">+65 ðŸ‡¸ðŸ‡¬</option>
                <option value="+234">+234 ðŸ‡³ðŸ‡¬</option>
                <option value="+27">+27 ðŸ‡¿ðŸ‡¦</option>
                <option value="+91">+91 ðŸ‡®ðŸ‡³</option>
                <option value="+86">+86 ðŸ‡¨ðŸ‡³</option>
                <option value="+7">+7 ðŸ‡·ðŸ‡º</option>
                <option value="+55">+55 ðŸ‡§ðŸ‡·</option>
                <option value="+52">+52 ðŸ‡²ðŸ‡½</option>
                <option value="+82">+82 ðŸ‡°ðŸ‡·</option>
                <option value="+971">+971 ðŸ‡¦ðŸ‡ª</option>
                <option value="+966">+966 ðŸ‡¸ðŸ‡¦</option>
                <option value="+20">+20 ðŸ‡ªðŸ‡¬</option>
                <option value="+90">+90 ðŸ‡¹ðŸ‡·</option>
              </select>
              <input type="tel" id="phone" required 
                class="input-field flex-1 pl-4 pr-4 py-3 border border-l-0 border-gray-200 rounded-r-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"
                placeholder="Enter your phone number">
            </div>
            <p class="text-xs text-gray-500 mt-1">Select your country code and enter your number.</p>
          </div>

          <!-- Country -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
            <div class="relative">
              <i class="fas fa-globe absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              <select id="country" required 
                class="input-field w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 bg-white">
                <option value="">Select your country</option>
                <option value="US">United States</option>
                <option value="UK">United Kingdom</option>
                <option value="CA">Canada</option>
                <option value="AU">Australia</option>
                <option value="DE">Germany</option>
                <option value="FR">France</option>
                <option value="JP">Japan</option>
                <option value="SG">Singapore</option>
                <option value="OTHER">Other</option>
              </select>
            </div>
          </div>

          <!-- Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <div class="relative">
              <i class="fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              <input type="password" id="password" required 
                class="input-field w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"
                placeholder="Create a strong password">
              <button type="button" onclick="togglePassword('password')" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
                <i class="fas fa-eye"></i>
              </button>
            </div>
            <p class="text-xs text-gray-500 mt-1">Min 8 characters, include uppercase, number & symbol</p>
          </div>

          <!-- Confirm Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
            <div class="relative">
              <i class="fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              <input type="password" id="confirmPassword" required 
                class="input-field w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"
                placeholder="Confirm your password">
              <button type="button" onclick="togglePassword('confirmPassword')" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <!-- Referral Code (Optional) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Referral Code (Optional)</label>
            <div class="relative">
              <i class="fas fa-gift absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              <input type="text" id="referralCode" 
                class="input-field w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"
                placeholder="Enter referral code">
            </div>
          </div>

          <!-- Terms Checkbox -->
          <div class="flex items-start">
            <input type="checkbox" id="terms" required class="mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary">
            <label for="terms" class="ml-2 text-sm text-gray-600">
              I agree to the <a href="#" class="text-primary hover:underline">Terms of Service</a> and 
              <a href="#" class="text-primary hover:underline">Privacy Policy</a>
            </label>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn-primary w-full py-3 text-white rounded-xl font-semibold text-lg">
            <i class="fas fa-user-plus mr-2"></i>Create Account
          </button>
        </form>

        <!-- Divider -->
        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-200"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-2 bg-white text-gray-500">Or sign up with</span>
          </div>
        </div>

        <!-- Social Login -->
        <div class="grid grid-cols-3 gap-3">
          <button class="flex items-center justify-center py-2 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">
            <i class="fab fa-google text-red-500 text-xl"></i>
          </button>
          <button class="flex items-center justify-center py-2 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">
            <i class="fab fa-apple text-gray-900 text-xl"></i>
          </button>
          <button class="flex items-center justify-center py-2 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">
            <i class="fab fa-microsoft text-blue-500 text-xl"></i>
          </button>
        </div>

        <!-- Sign In Link -->
        <p class="text-center mt-6 text-gray-600">
          Already have an account? 
          <a href="login.html" class="text-primary font-semibold hover:underline">Sign In</a>
        </p>
      </div>

      <!-- Footer -->
      <p class="text-center text-gray-400 text-sm mt-6">
        &copy; 2026 ELITESTOCKOPTIONS. All rights reserved.
      </p>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center">
    <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center transform scale-95 opacity-0 transition-all duration-300" id="successContent">
      <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <i class="fas fa-check text-green-500 text-3xl"></i>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">Account Created!</h3>
      <p class="text-gray-600 mb-6">Welcome to ELITESTOCKOPTIONS. Your account has been successfully created.</p>
      <div class="bg-blue-50 rounded-xl p-4 mb-6">
        <p class="text-sm text-blue-800">
          <i class="fas fa-info-circle mr-2"></i>
          You start with $0 balance. Make a deposit to begin trading.
        </p>
      </div>
      <a href="dashboard.html" class="btn-primary inline-block w-full py-3 text-white rounded-xl font-semibold">
        Go to Dashboard
      </a>
    </div>
  </div>

  <script>
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      field.type = field.type === 'password' ? 'text' : 'password';
    }

    document.getElementById('register-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (password !== confirmPassword) {
        alert('Passwords do not match!');
        return;
      }
      
      if (password.length < 8) {
        alert('Password must be at least 8 characters long!');
        return;
      }
      
      // Get form data
      const countryCode = document.getElementById('countryCode').value;
      const phoneNumber = document.getElementById('phone').value.trim();
      const fullPhone = countryCode + ' ' + phoneNumber;
      
      const userData = {
        id: Date.now().toString(),
        auth_id: null,
        fullName: document.getElementById('fullName').value,
        email: document.getElementById('email').value,
        phone: fullPhone,
        countryCode: countryCode,
        phoneNumber: phoneNumber,
        country: document.getElementById('country').value,
        referralCode: document.getElementById('referralCode').value,
        password: password,
        plan: 'Bronze',
        balance: 0,
        availableCash: 0,
        profitsBalance: 0,
        kycStatus: 'pending',
        createdAt: new Date().toISOString()
      };
      
      let users = JSON.parse(localStorage.getItem('elitestockoptions_users') || localStorage.getItem('eso_users') || '[]');
      if (users.find(u => u.email === userData.email)) {
        alert('An account with this email already exists!');
        return;
      }

      if (window.ESO_DB && window.ESO_DB.isReady()) {
        const existingRemote = await window.ESO_DB.findUserByEmail(userData.email);
        if (existingRemote) {
          alert('An account with this email already exists!');
          return;
        }
        const authUser = await window.ESO_DB.signUp(userData.email, password);
        if (!authUser) {
          const lastError = window.ESO_DB.getLastError ? window.ESO_DB.getLastError() : null;
          const reason = lastError?.message || 'Unknown Supabase error';
          alert(
            'Could not create auth account.\n\n' +
            'Reason: ' + reason + '\n\n' +
            'Check Supabase Dashboard â†’ Authentication â†’ Providers â†’ Email:\n' +
            '1) Enable Email provider\n' +
            '2) For now, disable "Confirm email" during testing\n' +
            '3) Save changes and try again.'
          );
          return;
        }
        userData.auth_id = authUser.id;

        const remoteSaved = await window.ESO_DB.upsertUser(userData);
        if (!remoteSaved) {
          alert('Could not save account to server. Check Supabase config and try again.');
          return;
        }
      }

      users.push(userData);
      localStorage.setItem('elitestockoptions_users', JSON.stringify(users));
      localStorage.setItem('eso_users', JSON.stringify(users));
      localStorage.setItem('elitestockoptions_user', JSON.stringify(userData));
      
      // Show success modal
      const modal = document.getElementById('successModal');
      const content = document.getElementById('successContent');
      modal.classList.remove('hidden');
      modal.classList.add('flex');
      setTimeout(() => {
        content.classList.remove('scale-95', 'opacity-0');
        content.classList.add('scale-100', 'opacity-100');
      }, 10);
    });
  </script>
<script src="../public/js/back-button.js"></script>
<script src="../public/js/theme.js"></script>
<script src="../public/js/smartsupp.js?v=20260219-2"></script>
</body>
</html>
